Analysis and Optimization of Graph Decompositions by Lifted Multicuts

Andrea Hor   akov       JanHendrik Lange     Bjoern Andres  

Abstract

We study the set of all decompositions  clusterings  of   graph through its characterization as
  set of lifted multicuts  This leads us to practically relevant insights related to the de nition
of classes of decompositions by mustjoin and
mustcut constraints and related to the comparison of clusterings by metrics  To  nd optimal
decompositions de ned by minimum cost lifted
multicuts  we establish some properties of some
facets of lifted multicut polytopes  de ne ef cient
separation procedures and apply these in   branchand cut algorithm 

  Introduction
This article is about the set of all decompositions  clusterings  of   graph    decomposition of   graph           
is   partition   of the node set   such that  for every subset
      of nodes  the subgraph of   induced by   is connected  An example is depicted in Fig    Decompositions
of   graph arise in practice  as feasible solutions of clustering problems  and in theory  as   generalization of partitions
of   set  to which they specialize for complete graphs 
We study the set of all decompositions of   graph through
its characterization as   set of multicuts    multicut of   is
  subset       of edges such that  for every  chordless 
cycle       of    we have          cid    An example is
depicted in Fig    For any graph      oneto one relation
exists between the decompositions and the multicuts of   
The multicut induced by   decomposition is the set of edges
that straddle distinct components  Multicuts are useful in
the study of decompositions as the characteristic function
         of   multicut    of   makes explicit  for
every pair            of neighboring nodes  whether   and
  are in distinct components  To make explicit also for nonneighboring nodes  speci cally  for all            cid  with
 Equal contribution  Max Planck Institute for Informatics 
Saarbr ucken  Germany  Correspondence to  Bjoern Andres
 andres mpiinf mpg de 

Proceedings of the   th International Conference on Machine
Learning  Sydney  Australia  PMLR     Copyright   by
the author   

Figure     decomposition of   graph is   partition of the node
set into connected subsets  Above  one decomposition is depicted
in green  Any decomposition is characterized by the set of those
edges  depicted as dotted lines  that straddle distinct components 
Such edge sets are precisely the multicuts of the graph 

      cid   cid  

 cid  whether   and   are in distinct components 

 

we de ne   lifting of the multicuts of   to multicuts of
  cid          cid  The multicuts of   cid  lifted from   are still in
oneto one relation with the decompositions of    Yet  they
are   more expressive model of these decompositions than
the multicuts of    We apply lifted multicuts in three ways 
Firstly  we study problems related to the de nition of   class
of decompositions by mustcut or mustjoin constraints  Section   Such constraints have applications where de ning
  decomposition totally is an ambiguous and tedious task 
     in the  eld of image segmentation  The  rst problem
is to decide whether   set of such constraints is consistent 
     whether   decomposition of the given graph exists that
satis es the constraints  We show that this decision problem is NPcomplete in general and can be solved ef cienty
for   subclass of constraints  The second problem is to
decide whether   consistent set of mustjoin and mustcut
constraints is maximally speci         whether no such constraint can be added without changing the set of decompositions that satisfy the constraints  We show that this decision
problem is NPhard in general and can be solved ef cienty
for   subclass of constraints  This  nding is relevant for
comparing the classes of decompositions de nable by mustjoin and mustcut constraints by certain metrics  which is
the next topic 
As   second application of lifted multicuts  we study the
comparison of decompositions and classes of decompositions by metrics  Section   To obtain   metric on the set of
all decompositions of   given graph  we de ne   metric on  
set of lifted multicuts that characterize these decompositions 

Analysis and Optimization of Graph Decompositions by Lifted Multicuts

  

  

  
 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

xe 

xe 

xe 

  

  

  
 

  
  cid 

 

 

 

 

 

 

 

 

 

 

 

 

 

xf

xe 

xe 

Figure   For any connected graph    left  the characteristic functions of all multicuts of    middle  span  as their convex hull
in RE  the multicut polytope of    right     polytope that is
   dimensional  Chopra   Rao   

Figure   For any connected graph             top left  and any
graph   cid          cid  with       cid   bottom left  those multicuts of
  cid  that are lifted from    middle  span  as their convex hull in RE 
the lifted multicut polytope          and   cid   right     polytope
that is    cid dimensional  Thm   

By lifting to different graphs  we obtain different metrics 
two of which are wellknown and here generalized  To extend this metric to the classes of decompositions de nable
by mustjoin and mustcut constraints  we de ne   metric on
partial lifted multicuts that characterize these classes  connecting results of Sections   and   We show that computing
this metric is NPhard in general and ef cient for   subclass
of mustjoin and mustcut constraints  These  ndings have
implications on the applicability of mustjoin and mustcut
constraints as   form of supervision  more speci cally  on
the practicality of certain error metrics and loss functions 
As   third application of lifted multicuts  we study the optimization of graph decompositions by minimum cost lifted
multicuts  The minimum cost lifted multicut problem is
  generalization of the correlation clustering problem  Its
applications in the  eld of computer vision are mentioned
below  To tackle this problem  we establish some properties
of some facets of lifted multicut polytopes  Fig    and  
de ne ef cient separation procedures and apply these in  
branchand cut algorithm 

  Related Work

Initial motivation to study decompositions of   graph by
multicuts came from the  eld of polyhedral optimization 
Multicut polytopes are studied by Gr otschel   Wakabayashi
  Deza et al      Chopra   Rao  
  and Deza   Laurent   who characterize several
classes of their facets 
The binary linear program whose feasible solutions are all
multicuts of   graph is known as the correlation clustering
problem from the work of Bansal et al    and Demaine
et al    who establish its APXhardness and   logarithmic approximation  The stability of its solutions is analyzed
by Nowozin   Jegelka   Generalizations to multilinear objective functions are studied by Kim et al   
and Kappes et al    The problem remains NPhard
for planar graphs  Voice et al    Bachrach et al   
where it admits   PTAS  Klein et al    and relaxations
that are often tight in practice  Yarkony et al   

The lifting of multicuts we de ne makes path connectedness explicit  For   single component  this is studied by
Nowozin   Lampert   who introduce the connected
subgraph polytope and outer relaxations  Applications of
the minimum cost lifted multicut problem and experimental comparisons to the correlation clustering problem in
the  eld of computer vision are by Keuper et al   
and Tang et al    who  nd feasible solutions by local
search  Keuper et al    Levinkov et al    and by
Beier et al    who  nd feasible solutions by consensus
optimization  Beier et al    The complexity of several decision problems related to clustering with mustjoin
and mustcut constraints is established by Davidson   Ravi
  Wellknown metrics on the set of all decompositions
of   graph are the metric of Rand   and the variation
of information  Meil     

 

  Multicuts
De nition   Let            be any graph    subgraph
  cid        cid    cid  of   is called   component of   iff   cid  is
nonempty  nodeinduced  and connected    partition  
of   is called   decomposition of   iff  for every      

 cid  of   induced by   is connected

the subgraph        cid  

 and hence   component of   
For any graph    we denote by DG      the set of all
decompositions of    Useful in the study of decompositions
are the multicuts of   graph 
De nition   For any graph              subset      
of edges is called   multicut of   iff  for every cycle      
of    we have          cid   
Lemma    Chopra   Rao    It is suf cient in Def   
to consider only the chordless cycles 
For any graph    we denote by MG      the set of all
multicuts of    One reason why multicuts are useful in

 That is    cid       cid    cid 

 cid 

 

graph relation 

 We do not require   component to be maximal        the sub 

Analysis and Optimization of Graph Decompositions by Lifted Multicuts

the study of decompositions is that  for every graph     
oneto one relation exists between the decompositions and
the multicuts of    An example is depicted in Fig   
Lemma   For any graph            the map     
DG      de ned by   is   bijection from DG to MG 

    DG             

                                    

 

Another reason why multicuts are useful in the study of
decompositions is that  for any graph            and any
decomposition   of    the characteristic function of the
multicut induced by   is    encoding of   of  xed length
   
Lemma    Chopra   Rao    For any graph    
       and any           the set    of those edges
that are labeled   is   multicut of   iff   holds  It is
suf cient in   to consider only chordless cycles 

     cycles             xe    cid 

 

xe cid 
  cid     

For any graph            we denote by XG the set of all
         that satisfy  

  Complete Graphs

The decompositions of   complete graph KV      cid  

 cid 

are precisely the partitions of the node set    by Def   
The multicuts of   complete graph KV relate oneto one to
the equivalence relations on    
Lemma   For any set   and the complete graph KV   the
map     MKV         de ned by   is   bijection between MKV and the set of all equivalence relations on    

 

     MKV            

                          

 

The bijection between the decompositions of   graph and the
multicuts of   graph  Lemma   specializes  for complete
graphs  to the wellknown bijection between the partitions of
  set and the equivalence relations on the set  by Lemma  
In this sense  decompositions and multicuts of graphs generalize partitions of sets and equivalence relations on sets 

  Lifted Multicuts
For any graph            the characteristic function    
XG of   multicut    of   makes explicit  for every
pair            of neighboring nodes  whether   and  
are in distinct components  To make explicit also for nonneighboring nodes  speci cally  for all            cid  with

 cid  whether   and   are in distinct components 

      cid   cid  

we de ne   lifting of the multicuts of   to multicuts of
  cid          cid 

 

De nition   For any graphs            and   cid          cid 
with       cid  the composed map  GG cid       cid     
  is
called the lifting of multicuts from   to   cid 
For any graphs            and   cid          cid  with       cid 
we introduce the notation FGG cid      cid       for brevity 
Lemma   For any connected graph            any
graph   cid          cid  with       cid  and any          cid 
 
the set    is   multicut of   cid  lifted from   iff

     cycles           xe    cid 
 vw   FGG cid       vwpaths      xvw  cid 
 vw   FGG cid       vwcuts          xvw  cid 

xe cid 
  cid     

   

xe

 

 

    xe 

 

   

For any graphs            and   cid          cid  with       cid 
we denote by XGG cid  the set of all          cid 
that satisfy
 

 cid 

  Partial Lifted Multicuts
As    rst application of lifted multicuts  we study the class
of decompositions of   graph de nable by mustjoin and
mustcut constraints  For this  we consider partial functions 
For any set      partial characteristic function of subsets
of   is   function from any subset       to     With
some abuse of notation  we denote the set of all partial
characteristic functions of subsets of   by       
          For any           we denote the
domain of   by dom         
For any connected graph            whose decompositions we care about and any graph   cid          cid  with
      cid  we consider   partial function           cid 
  For
any          dom     we constrain the nodes   and   to the
same component if  xvw     and to distinct components if
 xvw    

  Consistency

  natural question to ask is whether   decomposition of the
graph   exists that satis es these constraints  We show that
this decision problem is NPcomplete 
De nition   For any connected graph            any
graph   cid          cid  with       cid  and any           cid 
 
the elements of

XGG cid           XGG cid       dom      xe    xe 

 

are called the completions of    in XGG cid  In addition     is
called consistent and   partial characterization of multicuts

Analysis and Optimization of Graph Decompositions by Lifted Multicuts

of   cid  lifted from   iff

XGG cid     cid     

 

We denote the set of all partial characterizations of multicuts
of   cid  lifted from   by

          cid cid cid cid  XGG cid     cid   cid 
 cid 

 XGG cid   

 

 

Theorem   Deciding consistency is NPcomplete 
Lemma   Consistency can be decided ef ciently if    
dom    or

 vw   dom         

 xvw            vwpath            xe      

  Speci city

  less obvious question to ask for any partial characterization    of multicuts of   cid  lifted from   is whether    is
maximally speci   for its completions in XGG cid  In other
words  is there no edge       cid    dom    such that  for any
completions      cid  of    in XGG cid  we have xe     cid 
        an
edge that could be included in dom    without changing the
set of completions of    in XGG cid  We show that deciding
maximal speci city is NPhard 
De nition   Let              connected graph and   cid   
      cid    graph with       cid  For any       XGG cid  the edges

  
  cid             cid        cid    XGG cid      xe     cid 

 
are called decided  The edges   cid      cid    are called undecided  Moreover     is called maximally speci   iff 

  cid      dom     

 

Theorem   Deciding maximal speci city is NPhard 
Lemma   Maximal speci city can be decided ef ciently if
  cid      or     dom    

Below  we justify the term maximal speci city and de ne
an operation that maps any partial characterization of lifted
multicuts to one that is maximally speci   
De nition   For any connected graph            and
any graph   cid          cid  with       cid  the relation   on
 XGG cid  de ned by   is called the speci city of partial
characterizations of multicuts of   cid  lifted from   
       cid     XGG cid   

 
        cid    dom      dom    cid         dom       xe      cid 
 Note that   is equivalent to   cid      dom     as   cid     

 

dom    holds by de nition of   cid   

 cid 

Lemma   For any connected graph            and any
graph   cid          cid  with       cid  speci city is   partial
order on  XGG cid 
Note that two partial characterizations        cid     XGG cid  with
the same completions XGG cid      XGG cid   cid  need not be
comparable          For example  consider the graphs      cid 
from Fig    consider          cid        cid    and    cid       cid   
Nevertheless  we have the following lemma 
Lemma   For any connected graph            any
graph   cid          cid  with       cid  any       XGG cid  and
 XGG cid     
 
  maximum of  XGG cid             exists and is unique  Moreover     is maximally speci   in the sense of Def    iff    is
maximal          in  XGG cid   
De nition   Let            be   connected graph and let
  cid          cid  be   graph with       cid  For any       XGG cid 
we call the unique maximum of  XGG cid             the closure
of             and   cid  and denote it by clGG cid     
We denote by  XGG cid  the set of all maximally speci   partial
characterizations of multicuts of   cid  lifted from        

 cid cid cid  XGG cid   cid    XGG cid   
 cid 

   cid     XGG cid 

      XGG cid 

 

 XGG cid   

 
Theorem   For any        cid     XGG cid  we have XGG cid     
XGG cid   cid     XGG cid       XGG cid   cid    clGG cid       clGG cid     cid 
Lemma   For any connected graph            any
graph   cid          cid  with       cid  and any     XG  the
closure     clGG cid    of            and   cid  coincides with the
lifting of the multicut    of   to the multicut    of
  cid      

 clGG cid        GG cid     

 

Theorem   Computing closures is NPhard 
Lemma   In the special case that   cid      or     dom    
the closure can be computed ef ciently 

  Metrics
  Metrics on Decompositions

 cid cid cid       clGG cid    

 cid 

 cid 

As   second application of lifted multicuts  we compare decompositions of   given graph by comparing lifted multicuts
that characterize these decompositions  We compare these
lifted multicuts by comparing their characteristic functions
by Hamming metrics  For any    cid    and any        we
de ne   

  by the forms

     

                    
if xe     cid 
 
otherwise
  cid      cid   
  

       cid   
  
       cid   
  

 cid 
 cid 

 
 

  cid  

 

 

Analysis and Optimization of Graph Decompositions by Lifted Multicuts

Theorem   For any connected graph            any
graph   cid          cid  any       cid       the set   cid cid   
      cid  and the graph   cid cid          cid cid  the function   
  cid   
XGG cid cid    XGG cid cid      
  of the form   is   pseudometric
on XGG cid cid  Iff   cid  is   supergraph of         iff       cid    
  cid 
is   metric on XGG cid cid 

 cid 

    cid 

  cid      cid   
  

     

       cid 

 

Figure   Depicted are two decompositions of the pixel grid graph
of an image  all from  Arbel aez et al    along with the spectrum of pseudometrics of these decompositions 

 
 
 
 
 

 
 

 
 
 
 
 
 
 
 

 

 

 

 

       

Distance

 

 cid  and      
 cid  the metric   

By the oneto one relation between decompositions and
multicuts  Lemma     
  cid  induces   pseudometric on the
set DG of all decompositions of    Two special cases are
wellknown  For   cid      and       we have   
  
  cid      
which is the Hamming metric   on the multicuts that
characterize the decompositions  also known as the bound 

  cid  specializes to the metric of Rand   Between
  
  cid 
can be used to analyze more speci cally how two decompositions of the same graph differ  We propose an analysis
       the distance  vw of nodes   and   in                the
length of   shortest vwpath in    For this  we denote by

ary metric on decompositions  For   cid   cid  
these extremes       for       cid     cid  
     max vw   vw  cid  
       let         vw  cid  
 cid 

De nition   For any connected graph            and any
of nodes of distance   in    Moreover  let               
the constant function that maps any vw        to      
For any connected graph            we call the sequence

 cid  the diameter of   
 cid   vw      the set of pairs

 cid 

 

 

 

For   cid   cid  

the spectrum of pseudometrics on decompositions of   

 cid  and       cid         vw  cid       vw 

we call the metric   

  cid  the  metric on decompositions of   

 

   
    

    

 

An example of   spectrum of pseudometrics is depicted in
Fig    For any two decompositions    cid  of   connected
graph   and suitable lifted multicuts      cid  characterizing
         cid  equals the fraction of
these decompositions     
pairs of nodes at distance   in   that are either cut by   and
joined by  cid  or cut by  cid  and joined by        the pseudometric    
     compares decompositions of   speci cally
       the distance   in    The  metric compares decompositions        all distances  and each distance is weighted
equally  This is in contrast to Rand   metric which is also  
comparison        all distances but each distance is weighted
by the number of pairs of nodes that have this distance 

  Metrics on Classes of Decompositions

We compare classes of decompositions de nable by mustjoin and mustcut constraints by comparing partial lifted

multicuts that characterize these decompositions  To compare partial lifted multicuts  we compare their partial characteristic functions by an extension of the Hamming metric 
For any    cid    any       and any       
    we de ne
  such that for all
  
     
       cid         

                    

 

 
 
 
 

 cid 

  cid  

        cid   
  

        cid   
  

if     dom          dom    cid     xe  cid     cid 
if     dom          dom    cid     xe      cid 
if     dom          dom    cid 
otherwise

 

 

  cid       cid   
  

 

 

Theorem   For any connected graph            any
graph   cid          cid  with       cid  and any        
      the
function    

  cid     XGG cid     XGG cid      
  cid       cid      
   

  of the form
  cid clGG cid      clGG cid     cid 

 

is   pseudometric on  XGG cid  and   metric on  XGG cid  Moreover  for any        cid     XGG cid 

 XGG cid       XGG cid   cid       

  cid       cid       

 

By the oneto one relation between decompositions and multicuts  Lemma   every partial characterization of   lifted
multicut       XGG cid  de nes   class of decompositions of the
graph    namely those de ned by the lifted multicuts characterized by XGG cid    By Theorem      
     
wellde nes   metric on these classes of decompositions and
hence   means of comparing the classes of decompositions
de nable by mustjoin and mustcut constraints  Computing
  cid      cid  involves computing the closures of   and   cid  and
   
is therefore NPhard  by Theorem  

  cid  with        

  Polyhedral Optimization
As   third and  nal application of lifted multicuts  we turn to
the optimization of graph decompositions by lifted multicuts
of minimum cost 

Analysis and Optimization of Graph Decompositions by Lifted Multicuts

  

  

  
 

 

 

 
  cid 

  

 

 

 
  cid 

Figure   Depicted above in     is an instance of the minimum
cost lifted multicut problem  Def           graphs      cid  and costs
        Here  the cost   attributed to the additional edge
in   cid  results in the edges    and    not being cut in the optimum
      which has cost   Depicted in     is an instance of the
minimum cost multicut problem        the graph   cid  and the same
cost function  Here  the cost   does not prevent the edges    and
   from being cut in the optimum       which has cost  

De nition   For any connected graph            any
graph   cid          cid  with       cid  and any       cid      
the instance of the minimum cost lifted multicut problem
            cid  and   is the optimization problem

 cid cid 

    cid 

 cid 

 cid cid cid cid cid      XGG cid 

min

cexe

 

 

If   cid         specializes to the minimum cost multicut
problem          cid  and   that is also known as graph partition
or correlation clustering  If   cid       the minimum cost
lifted multicut problem             cid  and   differs from the
minimum cost multicut problem          cid  and    It has  
smaller feasible set XGG cid    XG cid  as we have shown in
Section   and depicted for the smallest example in Fig   
and   Unlike the minimum cost multicut problem          cid 
and    the minimum cost lifted multicut problem             cid 
and   is such that any feasible solution     XGG cid  indicates
by xvw     that the nodes   and   are connected in   by  
path of edges labeled   See also Fig    This property can be
used to penalize by cvw     precisely those decompositions
of   for which   and   are in distinct components  For
nodes   and   that are not neighbors in    such costs are
sometimes called nonlocal attractive 
To solve instances of the APXhard minimum cost lifted
multicut problem by means of   branchand cut algorithm 
we study the geometry of lifted multicut polytopes 
De nition    Deza   Laurent    For any graph    
       the convex hull      conv XG of XG in RE is
called the multicut polytope of   
De nition   For any connected graph            and
any graph   cid          cid  with       cid   GG cid 
 
conv XGG cid  is called the lifted multicut polytope         
and   cid 

Examples are shown in Fig    and   respectively  In general 
the lifted multicut polytope  GG cid         graphs   and   cid 
 Fig    is   subset of the multicut polytope    cid  of the graph
  cid   Fig    By Lemma   the system of cycle inequalities

  for   cid  and cut inequalities   for   and   cid  is redundant
as   description of XGG cid  and thus of  GG cid  Below  we study
the geometry of  GG cid 

  Dimension
Theorem   For any connected graph            and any
graph   cid          cid  with       cid  dim  GG cid       cid 
We prove Theorem   by constructing    cid      multicuts of
  cid  lifted from   whose characteristic functions are af ne
independent points  The strategy is to construct  for any
      cid  an     XGG cid  with xe     and  as many ones as
possible  The challenge is that edges cannot be labeled independently  In particular  for     FGG cid  xf     can imply 
for certain   cid    FGG cid        that xf cid      as illustrated in
Fig    This structure is made explicit below  in Def    and
  and Lemmata   and  
De nition   For any connected graph            and
any graph   cid          cid  such that       cid  the sequence
 Fn     of subsets of FGG cid  de ned below is called the
hierarchy of FGG cid  with respect to   
          
    For any       and any              FGG cid 
         Fn iff there exists   vwpath in   such that 
for any distinct nodes   cid  and   cid  in the path such that
   cid    cid   cid         either    cid    cid   cid  FGG cid  or there
exists   natural number       such that    cid    cid    Fj 
Lemma   For any connected graph            any
graph   cid          cid  with       cid  and any     FGG cid  there
exists an       such that     Fn 
De nition   For any connected graph            and
any graph   cid          cid  with       cid  the map  cid    FGG cid   
  such that      FGG cid          cid              
Fn      cid  Fn  is called the level function of FGG cid 
Lemma   For any connected graph            any
graph   cid          cid  with       cid  and for any     FGG cid 
there exists an     XGG cid  called ffeasible  such that
    xf    
    xf cid      for all   cid    FGG cid        with  cid   cid     cid    

  Facets
We characterize those edges       cid  for which the inequality
xe     de nes   facet of the lifted multicut polytope  GG cid 
Theorem   For any connected graph            any
graph   cid          cid  with       cid  and any       cid  the
inequality xe     de nes   facet of  GG cid  iff there is no
             FGG cid  such that   connects   pair of vw cutvertices 

 For any graph            and any              vw cut 

vertex is   node       that lies on every vwpath of   

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

Figure   If two nodes              FGG cid  are in the same component  as indicated by xf     this can imply xf cid      for one or
more   cid            In     xf      implies xf      and xf     
In     xf      implies xf      or xf     

Next  we give conditions that contribute to identifying those
edges       cid  for which the inequality     xe de nes  
facet of the lifted multicut polytope  GG cid 
Theorem   For any connected graph            any
graph   cid          cid  with       cid  and any       cid  the
following assertions hold  In case        the inequality
    xe de nes   facet of  GG cid  iff there is no triangle in   cid 
containing    In case uv       FGG cid  the inequality    
xe de nes   facet of  GG cid  only if the following necessary
conditions hold 
    There is no triangle in   cid  containing   
    The distance of any pair of uv cutvertices except
       is at least   in   cid 
    There is no triangle of nodes      cid    in   cid  such that
      cid  is   uv separating node set and   is   uv cutvertex 

Next  we characterize those inequalities of   and   that
are facetde ning for  GG cid  Chopra   Rao   have
shown that an inequality of   de nes   facet of the multicut
polytope    iff the cycle   is chordless  We establish  
similar characterization of those inequalities of   and  
that de ne   facet of the lifted multicut polytope  GG cid  For
clarity  we introduce some notation  For any cycle   of  
and any        let

 cid 

xe cid 
  cid     

     XGG cid 
 cid cid cid cid cid cid xe  
 cid cid cid cid cid xvw  
 cid 

    XGG cid 

 
 cid 

 cid 

   

xe

SGG cid        

SGG cid         

 GG cid         conv SGG cid        

For any vw       FGG cid  and any vwpath   in    let

 GG cid          conv SGG cid         

Theorem   For any connected graph            and
any graph   cid          cid  with       cid  the following assertions hold 

Analysis and Optimization of Graph Decompositions by Lifted Multicuts

    For any cycle   in   and any        the polytope
 GG cid       is   facet of  GG cid  iff   is chordless in   cid 
    For any edge vw       FGG cid  and any vwpath  
in    the polytope  GG cid        is   facet of  GG cid  iff
        is chordless in   cid 

Inequalities de ned by cycles in   cid  that contain more than
one edge from the set FGG cid  do not occur in   or   They
are valid for  GG cid  as they are valid for    cid     GG cid  They
de ne    nontrivial  facet of  GG cid  only if the cycle is chordless  as chordal cycles are not even facetde ning for    cid 
At the same time  chordlessness is not   suf cient condition
for facetde ningness of nontrivial cycles  For example  in
Fig      the cycle inequality xf    xf   xv    is dominated
by the  nontrivial  valid inequality xf    xf 
Next  we consider the cut inequalities   Examples of cuts
that are not facetde ning for  GG cid  are shown in Fig   
in the appendix  To constrain the class of cuts that are
facetde ning  we introduce additional notation  For any
connected graph            any distinct nodes         
and any     vwcuts    we denote by

                           

 
 
the largest components of the graph            that contain
  and    respectively  By de nition of   vwcut  we have

                           

                       

                           

 
 

We denote by FGG cid vw     the set of those edges in FGG cid 
except vw  that cross the vwcut   of        

FGG cid vw            FGG cid     vw     cid          

   cid            

 
We denote by   cid vw           FGG cid vw          the
subgraph of   cid  that comprises all edges from FGG cid vw    
and    Finally  we de ne

SGG cid vw      

    XGG cid 

    xe 

 cid 

 cid cid cid cid cid    xvw  

 cid 

   

 GG cid vw       conv SGG cid vw      

De nition   For any connected graph            any
distinct          and any     vwcuts      component
        of   is called properly  vw    connected iff

                                  

 
 For any graph            and any distinct nodes           
  vwcut of   is   minimal  with respect to inclusion  set      
such that   and   are not connected in           

 cid 

 
 

 

 

 

 

Analysis and Optimization of Graph Decompositions by Lifted Multicuts

It is called improperly  vw    connected iff

                                 

 

It is called  vw    connected iff it is properly or improperly
 vw    connected 
For any  vw    connected component         of    we
denote by FV        cid   cid      cid    FGG cid vw         cid       
  cid        the set of those edges   cid   cid      cid    FGG cid vw    
such that         is also    cid   cid    connected 
Theorem   For any connected graph            any
graph   cid          cid  with       cid  any vw       FGG cid 
and any     vwcuts     GG cid vw     is   facet of  GG cid 
only if the following necessary conditions hold 

   For any        there exists    vw    connected com 

ponent         of   such that       

   For any    cid      FGG cid vw     there exists an edge
      and  vw    connected components        
and         of   such that        and       
and      FV    cid       FV  

   For any   cid    FGG cid vw     any    cid     
FGG cid vw          cid  and any       
there exist  vw    connected components         and
        with   cid    FV   and   cid    FV   such that

     FV    cid    or      FV    cid     

 

   For any   cid             any   cid             and any
  cid   cid path      VP   EP   in   cid vw     there exists  
properly  vw    connected component         of
  such that

   cid             cid cid    VP                cid cid       
     cid             cid cid    VP                cid cid         
 

   For any cycle      VY   EY   in   cid vw    
there exists   properly  vw    connected component
        of   such that

   cid    VY                cid       

     cid    VY                cid         

 

  Algorithms

To study the relevance of geometric properties established
above  we compare two separation procedures    and  
for lifted multicut polytopes  We implement these for the
branchand cut algorithm in the software Gurobi  Our code
is available at https github com bjoernandres graph  The

 
 
 
 

 
 
 
 
 
 
 
 
 
 
 
 
 
 

 
 

 

 

 

 
Time    

 

 

 

Figure   Compared above are the separation procedures    black 
and    green  in   branchand cut search for solutions of an instance of the minimum cost lifted multicut problem by Keuper
et al    Upper and lower bounds are depicted as thin and
thick lines  respectively 

procedure   is canonical and serves as   reference  It separates infeasible points by any of the inequalities  
Violated inequalities of   and   are found by searching
for shortest chordless paths  Violated inequalities of   are
found by searching for minimum vwcuts  The procedure
  is less canonical  It separates infeasible points by some
cycle inequalities          cid   cf  Theorem   and by cut inequalities   Violated cycle inequalities of   cid  are found by
 rst seaching for paths and cycles as before but then replacing subpaths by chords in   cid  Violated cutinequalities are
found as before but added to the problem only conditionally 
For each violated inequality of   that we  nd and the corresponding          FGG cid  and     vwcuts    we search
for   vwpath   in   cid  such that one of the cycle inequalities for the cycle formed by   and        is violated  If it
exists  only the cycle inequality is added  Otherwise  the
cutinequality is added  The advantage of   over   can be
seen in Fig    for an instance of the min cost lifted multicut
problem by Keuper et al    with                 
and    cid     

  Conclusion
By studying the set of all decompositions  clusterings  of
  graph through its characterization as   set of lifted multicuts  we have gained three insights    Toward the de nition
of classes of decompositions by mustjoin and mustcut
constraints  we have seen that consistency and maximal
speci city are NPhard to decide    Toward the comparison
of decompositions by metrics  we have de ned   generalization of Rand   metric and the boundary metric that enables
more detailed analyses of how two decompositions of the
same graph differ  This metric extends to classes of decompositions de nable by mustjoin and mustcut constraints for
which it is NPhard to compute    Toward the optimization
of graph decompositions by minimum cost lifted multicuts 
we have established some properties of some facets of lifted
multicut polytopes  These properties have led us to ef cient
separation procedures and   branchand cut algorithm for
the minimum cost lifted multicut problem 

Analysis and Optimization of Graph Decompositions by Lifted Multicuts

References
Arbel aez  Pablo  Maire  Michael  Fowlkes  Charless    and
Malik  Jitendra  Contour detection and hierarchical image
segmentation  IEEE Transactions on Pattern Analysis
and Machine Intelligence     

Bachrach  Yoram  Kohli  Pushmeet  Kolmogorov  Vladimir 
and Zadimoghaddam  Morteza  Optimal coalition structure generation in cooperative graph games  In AAAI 
 

Bansal  Nikhil  Blum  Avrim  and Chawla  Shuchi  Correlation clustering  Machine Learning   
  doi     MACH 

Beier  Thorsten  Andres  Bjoern    othe  Ullrich  and Hamprecht  Fred    An ef cient fusion move algorithm for
In ECCV 
the minimum cost lifted multicut problem 
  doi     

Beier  Thorsten  Pape  Constantin  Rahaman  Nasim 
Prange  Timo  Berg  Stuart  Bock  Davi    Cardona 
Albert  Knott  Graham    Plaza  Stephen    Scheffer 
Louis    Koethe  Ullrich  Kreshuk  Anna  and Hamprecht  Fred    Multicut brings automated neurite segmentation closer to human performance  Nature Methods 
    doi   nmeth 

Chopra  Sunil and Rao       The partition problem  Mathdoi 

ematical Programming     
 BF 

Chopra  Sunil and Rao       Facets of the kpartition
polytope  Discrete Applied Mathematics   
  doi         

Davidson  Ian and Ravi        Intractability and clustering
with constraints  In ICML    doi   
 

Demaine  Erik    Emanuel  Dotan  Fiat  Amos  and Immorlica  Nicole  Correlation clustering in general weighted
graphs  Theoretical Computer Science   
    doi     tcs 

Deza  Michel Marie and Laurent  Monique  Geometry of

Cuts and Metrics  Springer   

Deza  Michel Marie  Gr otschel  Martin  and Laurent 
Monique  Complete descriptions of small multicut polytopes  In Applied Geometry and Discrete Mathematics
  The Victor Klee Festschrift  volume   of DIMACS Series in Discrete Mathematics and Theoretical Computer
Science  pp     

Gr otschel  Martin and Wakabayashi  Yoshiko    cutting
plane algorithm for   clustering problem  Mathematical Programming      doi   
BF 

Kappes    org Hendrik  Speth  Markus  Reinelt  Gerhard 
and Schn orr  Christoph  Higherorder segmentation via
multicuts  Computer Vision and Image Understanding 
      doi     cviu 

Keuper  Margret  Levinkov  Evgeny  Bonneel  Nicolas 
Lavou    Guillaume  Brox  Thomas  and Andres  Bjoern  Ef cient decomposition of image and mesh graphs
by lifted multicuts  In ICCV    doi   ICCV 
 

Kim  Sungwoong  Yoo  Chang    Nowozin  Sebastian  and
Kohli  Pushmeet  Image segmentation using higherorder
IEEE Transactions on Pattern
correlation clustering 
Analysis and Machine Intelligence   
  doi   TPAMI 

Klein  Philip    Mathieu  Claire  and Zhou  Hang  Correlation clustering and twoedge connected augmentation
for planar graphs  In Symposium on Theoretical Aspects
of Computer Science    doi   LIPIcs STACS 
 

Levinkov  Evgeny  Uhrig  Jonas  Tang  Siyu  Omran  Mohamed  Insafutdinov  Eldar  Kirillov  Alexander  Rother 
Carsten  Brox  Thomas  Schiele  Bernt  and Andres  Bjoern  Joint graph decomposition and node labeling by local
search  In CVPR     Forthcoming 

Meil    Marina  Comparing clusteringsan information based
distance  Journal of Multivariate Analysis   
    doi     jmva 

Nowozin  Sebastian and Jegelka  Stefanie  Solution stability
in linear programming relaxations  Graph partitioning
and unsupervised learning  In ICML   

Nowozin  Sebastian and Lampert  Christoph    Global interactions in random  eld models    potential function
ensuring connectedness  SIAM Journal on Imaging Sciences      doi   

Rand  William    Objective criteria for the evaluation of
clustering methods  Journal of the American Statistical Association      doi   
 

Deza  Michel Marie  Gr otschel  Martin  and Laurent 
Monique  Cliqueweb facets for multicut polytopes 
Mathematics of Operations Research   
  doi   moor 

Tang  Siyu  Andriluka  Mykhaylo  Andres  Bjoern  and
Schiele  Bernt  Multiple people tracking by lifted multicut and person reidenti cation  In CVPR     Forthcoming 

Analysis and Optimization of Graph Decompositions by Lifted Multicuts

Voice  Thomas  Polukarov  Maria  and Jennings  Nicholas   
Coalition structure generation over graphs  Journal of
Arti cial Intelligence Research     

Yarkony  Julian  Ihler  Alexander  and Fowlkes  Charless   
Fast planar correlation clustering for image segmentation 
In ECCV   

